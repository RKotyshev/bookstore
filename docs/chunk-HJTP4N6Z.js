import{b as X,c as Y}from"./chunk-QH36URCS.js";import{a as J,b as K,g as Q,h as W}from"./chunk-E34ER7YR.js";import"./chunk-GEXEHXWH.js";import{b as D,d as f,g as k,h as q,k as O,n as V,o as P,q as G,s as R}from"./chunk-SNFFYGSZ.js";import{a as H}from"./chunk-A4FVCTTO.js";import{Ca as m,Cb as A,Eb as j,Hb as L,Ia as p,Na as o,O as y,Oa as r,Oc as T,Pa as g,Pc as B,Qa as E,Ra as F,Sc as z,Ta as M,U as c,Vc as $,Wc as U,Xa as S,Xc as x,Y as v,Z as d,Za as _,ba as I,bb as n,ca as w,i as C,ib as b,jb as N,ta as s,ua as u}from"./chunk-Q4QVNFAK.js";function it(e,t){e&1&&(o(0,"mat-error"),n(1," This field is required "),r())}function rt(e,t){e&1&&(o(0,"mat-error"),n(1," Incorrect email type "),r())}function ot(e,t){e&1&&(o(0,"mat-error"),n(1," This field is required "),r())}function nt(e,t){e&1&&(o(0,"mat-error"),n(1," Incorrect username or password "),r())}function at(e,t){if(e&1){let a=M();E(0),o(1,"h2"),n(2,"Authorization"),r(),o(3,"form",1)(4,"mat-form-field")(5,"mat-label"),n(6,"Enter your email:"),r(),g(7,"input",2),p(8,it,2,0,"mat-error",0)(9,rt,2,0,"mat-error",0),r(),o(10,"mat-form-field")(11,"mat-label"),n(12,"Enter your password:"),r(),g(13,"input",3),p(14,ot,2,0,"mat-error",0),r(),p(15,nt,2,0,"mat-error",0),o(16,"section",4)(17,"button",5),S("click",function(){I(a);let i=_();return w(i.onLogin())}),n(18,"Login"),r(),o(19,"a",6),n(20,"Sign up"),r()()(),F()}if(e&2){let a=_();s(3),m("formGroup",a.authForm),s(5),m("ngIf",a.emailControl.hasError("required")),s(),m("ngIf",a.emailControl.hasError("email")),s(5),m("ngIf",a.passwordControl.hasError("required")),s(),m("ngIf",a.loginError)}}var tt=(()=>{let t=class t{constructor(l,i,h){this._authService=l,this._formBuilder=i,this._router=h,this.loginError=!1,this._destroyed=new C}get isLoggedIn$(){return this._authService.isLoggedIn$}get emailControl(){return this.authForm.get("email")}get passwordControl(){return this.authForm.get("password")}ngOnInit(){this._initForm()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}onLogin(){this.authForm.valid&&this._authService.logIn({email:this.authForm.get("email").value,password:this.authForm.get("password").value}).pipe(y(this._destroyed)).subscribe({next:()=>{this.loginError=!1,this._router.navigate(["/"])},error:()=>{this.loginError=!0}})}_initForm(){this.authForm=this._formBuilder.group({email:this._formBuilder.control({value:"",disabled:!1},{validators:[f.required,f.email]}),password:this._formBuilder.control({value:"",disabled:!1},{validators:[f.required]})})}};t.\u0275fac=function(i){return new(i||t)(u(H),u(G),u($))},t.\u0275cmp=v({type:t,selectors:[["app-auth"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"formGroup"],["matInput","","formControlName","email","type","email","placeholder","user@google.com"],["matInput","","formControlName","password","type","password"],[1,"actions"],["mat-fab","","extended","","color","accent",3,"click"],["mat-fab","","extended","","color","primary","routerLink","/registration"]],template:function(i,h){i&1&&(p(0,at,21,5,"ng-container",0),b(1,"async")),i&2&&m("ngIf",N(1,1,h.isLoggedIn$)===!1)},dependencies:[A,O,D,k,q,V,P,Q,J,K,X,B,T,U,j],styles:["div[_ngcontent-%COMP%]{margin-bottom:20px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;min-width:280px;max-width:500px;margin:0 auto 20px}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.actions[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:row;justify-content:space-around;margin-top:20px}"],changeDetection:0});let e=t;return e})();var mt=[{path:"",component:tt}],et=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=d({type:t}),t.\u0275inj=c({imports:[x.forChild(mt),x]});let e=t;return e})();var Nt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=d({type:t}),t.\u0275inj=c({imports:[L,R,W,Y,z,et]});let e=t;return e})();export{Nt as AuthorizationModule};
