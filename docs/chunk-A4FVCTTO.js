import{D as g,Kb as p,L as m,T as f,Vc as I,W as h,Yc as S,j as u,s as a,u as l}from"./chunk-Q4QVNFAK.js";var r="accessToken",s="refreshToken",$=(()=>{let o=class o{constructor(t,e){this._http=t,this._router=e,this._logged$=new u(!1),this._authorizationUrl=`${S}/token`}get isLoggedIn$(){return this._logged$.asObservable().pipe(m({bufferSize:1,refCount:!0}))}logIn(t){return this._http.post(`${this._authorizationUrl}/`,t).pipe(l(e=>(localStorage.setItem(s,e.refresh),localStorage.setItem(r,e.access),this._logged$.next(!0),!0)))}logOut(){localStorage.removeItem(s),localStorage.removeItem(r),this._logged$.next(!1),this._router.navigate(["authorization"])}getAccessToken(){return localStorage.getItem(r)}setLoggedIn(){this._logged$.next(!0)}getRefreshedAccessToken(){let t=localStorage.getItem(s);if(!t)return a(null);let e={refresh:t};return localStorage.removeItem(r),localStorage.removeItem(s),this._http.post(`${this._authorizationUrl}/refresh/`,e).pipe(l(n=>{let c=n.access;return localStorage.setItem(r,c),localStorage.setItem(s,c),c}),g(()=>a(null)))}verifyToken(t){let e=t==="access"?localStorage.getItem(r):localStorage.getItem(s);if(!e)return a(null);let n={token:e};return this._http.post(`${this._authorizationUrl}/verify/`,n).pipe(g(()=>a(null)))}};o.\u0275fac=function(e){return new(e||o)(h(p),h(I))},o.\u0275prov=f({token:o,factory:o.\u0275fac,providedIn:"root"});let i=o;return i})();export{$ as a};
